---
import Logo from "./logo.astro";


const mainMenu = {
  home: {
    label: "Inicio",
    href: "/",
  },
  about: {
    label: "Sobre Nosotros",
    href: "/about",
  },
  services: {
    label: "Servicios",
    href: "/services",
  },
  contact: {
    label: "Contacto",
    href: "/contact",
  },
};
---

<nav id="main-nav" class="bg-white shadow-md fixed w-full top-0 z-10 transition-transform duration-300">
  <div class="flex justify-between items-center max-w-7xl mx-auto py-2 pl-2 pr-4 sm:px-4 lg:px-0">

    <Logo/>

    <button id="menu-btn" class="h-10 gap-1 md:hidden flex items-center font-bold text-zinc-950">
      Men√∫
      <svg class="w-8 h-8 text-gray-950" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <div
      id="menu"
      class="absolute md:static left-0 top-16 w-full md:w-auto bg-white md:bg-transparent shadow-md md:shadow-none
             p-4 md:p-0 space-y-2 md:space-y-0 md:flex md:space-x-8 hidden"
    >
      <a href={mainMenu.home.href} class="block text-gray-700 hover:underline text-right font-semibold py-2">Inicio</a>
      <a href="/#beneficios" class="block text-gray-700 hover:underline text-right font-semibold py-2">Beneficios</a>
      <a href="/#requisitos" class="block text-gray-700 hover:underline text-right font-semibold py-2">Requisitos</a>
      <a href="/#sucursales" class="block text-gray-700 hover:underline text-right font-semibold py-2">Sucursales</a>
      <a href="/#contacto" class="block text-gray-700 hover:underline text-right font-semibold py-2">Contacto</a>
      <a href={mainMenu.about.href} class="block text-gray-700 hover:underline text-right font-semibold py-2">Nosotros</a>
    </div>
  </div>
</nav>

<script>
const btn = document.getElementById("menu-btn");
const menu = document.getElementById("menu");

btn?.addEventListener("click", (e) => {
  menu?.classList.toggle("hidden");
});

// Cerrar al hacer click fuera
document.addEventListener("click", (e) => {
  if (!menu || !btn) return;

  const target = e.target;

  if (target instanceof Node) {
    if (!menu.contains(target) && !btn.contains(target)) {
      menu.classList.add("hidden");
    }
  }
});



  // hide nav on scroll
  let lastScrollY = window.scrollY;
  const nav = document.getElementById("main-nav");

  window.addEventListener("scroll", () => {
    const currentScrollY = window.scrollY;

    if (currentScrollY > lastScrollY && currentScrollY > 80) {
      nav?.classList.add("-translate-y-full");
    } else {
      nav?.classList.remove("-translate-y-full");
    }

    lastScrollY = currentScrollY;

    });

</script>
